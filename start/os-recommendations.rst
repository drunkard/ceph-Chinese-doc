==============
 推荐操作系统
==============

Ceph 依赖
=========

按常规来说，我们建议在较新的 Linux 发行版上部署 Ceph ；同样，\
要选择长期支持的版本。


Linux 内核
----------

- **Ceph 内核态客户端**

  如果你在用内核客户端映射 RBD 块设备或挂载 CephFS ，那么一般\
  来说，内核客户端机器应该使用由 http://kernel.org 或者发行版\
  提供的“稳定”或者是“长期维护的”内核系列。

  对于 RBD ，如果你想\ *紧跟*\ 长期内核，当前，我们建议用基于
  4.x 的“长期维护”内核系列：

  - 4.19.z
  - 4.14.z

  对于 CephFS ，选择内核版本时可参考\ `用内核驱动挂载 CephFS`_\ 。

  较老的内核客户端可能不支持你的 `CRUSH 可调值`_\ 配置、或
  Ceph 集群其它比较新的功能，这样的话，就得关闭存储集群上的\
  这些功能。


系统平台
========
.. Platforms

下面的表格展示了 Ceph 对各种 Linux 发行版的依赖对应关系。\
一般来说， Ceph 对具体发行版的依赖很少，\
只是与内核、系统初始化软件包（即 sysvinit 、 systemd ）有关。

Octopus (15.2.z)
-----------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 8        | N/A                | linux-4.18   |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| CentOS   | 7        | N/A                | linux-3.10.0 | 4, 5    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 10       | Buster             | linux-4.19   |         | B          |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 8        | Ootpa              | linux-4.18   |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 18.04    | Bionic Beaver      | linux-4.15   | 4       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| openSUSE | 15.2     | Leap               | linux-5.3    | 6       |            |
+----------+----------+--------------------+--------------+---------+------------+
| openSUSE |          | Tumbleweed         |              |         |            |
+----------+----------+--------------------+--------------+---------+------------+


Nautilus (14.2.z)
-----------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 7        | N/A                | linux-3.10.0 | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 8.0      | Jessie             | linux-3.16.0 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 9.0      | Stretch            | linux-4.9    | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 16.04    | Xenial Xerus       | linux-4.4.0  | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 18.04    | Bionic Beaver      | linux-4.15   | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| openSUSE | 15.1     | Leap               | linux-4.12   | 6       |            |
+----------+----------+--------------------+--------------+---------+------------+

Luminous (12.2.z)
-----------------

+----------+----------+--------------------+--------------+---------+------------+
| Distro   | Release  | Code Name          | Kernel       | Notes   | Testing    |
+==========+==========+====================+==============+=========+============+
| CentOS   | 7        | N/A                | linux-3.10.0 | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 8.0      | Jessie             | linux-3.16.0 | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Debian   | 9.0      | Stretch            | linux-4.9    | 1, 2    | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Fedora   | 22       | N/A                | linux-3.14.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| RHEL     | 7        | Maipo              | linux-3.10.0 |         | B, I       |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 14.04    | Trusty Tahr        | linux-3.13.0 |         | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+
| Ubuntu   | 16.04    | Xenial Xerus       | linux-4.4.0  | 3       | B, I, C    |
+----------+----------+--------------------+--------------+---------+------------+

附注
----
.. Notes

- **1**: 默认内核的 ``btrfs`` 版本较老，不推荐用于 ``ceph-osd``
  存储节点；从 Mimic 版起我们建议用 ``bluestore`` ，之前的建议\
  用 ``XFS`` 搭配 ``filestore`` 。

- **2**: 默认内核带的 Ceph 客户端较老，不推荐做内核空间客户端\
  （内核 RBD 或 Ceph 文件系统），请升级到推荐的内核。

- **3**: 使用 ``btrfs`` 文件系统时，默认内核经常过不了\
  质量检验。从 Mimic 版起我们建议用 ``bluestore`` ，之前的建议\
  用 ``XFS`` 搭配 ``filestore`` 。

- **4**: ``btrfs`` is no longer tested on this release. We recommend
  using ``bluestore``.

- **5**: Some additional features related to dashboard are not available.

- **6**: Building packages are built regularly, but not distributed by Ceph.

测试版
------
.. Testing

- **B**: 我们会为此平台构建发布包。对其中的某些平台，\
  可能也会持续地编译所有分支、做基本单元测试。

- **I**: 我们在这个平台上做基本的安装和功能测试。

- **C**: 我们在这个平台上持续地做全面的功能、退化、压力测试，\
  包括开发分支、预发布版本、正式发布版本。


.. _CRUSH 可调值: ../../rados/operations/crush-map#tunables
.. _用内核驱动挂载 CephFS: ../../cephfs/mount-using-kernel-driver#which-kernel-version
